<?xml version="1.0" encoding="utf-8"?>
<UserControl x:Class="AppointmentScheduler.Views.CustomerViews"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:av="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             mc:Ignorable="av"
             av:DesignWidth="855.213">

    <!-- Main layout grid -->
    <Grid Margin="16">
        <Grid.RowDefinitions>
            <RowDefinition/>
            <!-- Data grid area -->
            <RowDefinition Height="0"/>
            <RowDefinition Height="Auto"/>
            <!-- Buttons area -->
        </Grid.RowDefinitions>

        <!-- Card containing the Customers DataGrid -->
        <Border Grid.Row="0"
                Style="{StaticResource CardBorderStyle}"
                Margin="0,0,0,16"
                Grid.RowSpan="2">
            <DockPanel>

                <!-- Section header -->
                <StackPanel DockPanel.Dock="Top"
                            Orientation="Horizontal"
                            Margin="0,0,0,12">
                    <TextBlock Text="Customers"
                               FontSize="18"
                               FontWeight="SemiBold"
                               Foreground="{StaticResource PrimaryColorBrush}"/>
                    <TextBlock Text=""
                               Margin="8,2,0,0"
                               FontSize="12"
                               Foreground="{StaticResource SubtleTextBrush}" />
                </StackPanel>

                <!-- ScrollViewer to allow scrolling within the grid -->
                <ScrollViewer HorizontalScrollBarVisibility="Auto"
                              VerticalScrollBarVisibility="Auto">

                    <!-- DataGrid showing customer records -->
                    <DataGrid x:Name="CustomerDataGrid"
                              ItemsSource="{Binding CustomerList}"
                              AutoGenerateColumns="False"
                              CanUserAddRows="False"
                              CanUserDeleteRows="False"
                              IsReadOnly="True"
                              HeadersVisibility="Column"
                              GridLinesVisibility="None"
                              BorderThickness="0"
                              RowHeight="32"
                              ColumnHeaderHeight="32"
                              SelectionMode="Single"
                              SelectionUnit="FullRow"
                              ScrollViewer.CanContentScroll="False"
                              ScrollViewer.HorizontalScrollBarVisibility="Auto"
                              ScrollViewer.VerticalScrollBarVisibility="Auto"
                              AlternationCount="2"
                              MinRowHeight="30">

                        <!-- Column definitions with responsive widths -->
                        <DataGrid.Columns>
                            <DataGridTextColumn Header="ID" 
                                                Binding="{Binding CustomerId}" 
                                                Width="Auto" 
                                                MinWidth="50"/>
                            <DataGridTextColumn Header="Customer Name" 
                                                Binding="{Binding CustomerName}" 
                                                Width="2*" 
                                                MinWidth="120"/>
                            <DataGridCheckBoxColumn Header="Active" 
                                                    Binding="{Binding IsActive}" 
                                                    Width="Auto" 
                                                    MinWidth="60"/>
                            <DataGridTextColumn Header="Phone" 
                                                Binding="{Binding PhoneNumber}" 
                                                Width="*" 
                                                MinWidth="100"/>
                            <DataGridTextColumn Header="Address" 
                                                Binding="{Binding Address}" 
                                                Width="2*" 
                                                MinWidth="150"/>
                            <DataGridTextColumn Header="Address 2" 
                                                Binding="{Binding Address2}" 
                                                Width="*" 
                                                MinWidth="80"/>
                            <DataGridTextColumn Header="City" 
                                                Binding="{Binding City}" 
                                                Width="*" 
                                                MinWidth="80"/>
                            <DataGridTextColumn Header="ZIP" 
                                                Binding="{Binding PostalCode}" 
                                                Width="Auto" 
                                                MinWidth="70"/>
                            <DataGridTextColumn Header="Country" 
                                                Binding="{Binding Country}" 
                                                Width="*" 
                                                MinWidth="80"/>
                            <DataGridTextColumn Header="Created" 
                                                Binding="{Binding CreateDate, StringFormat=\{0:g\}}" 
                                                Width="*" 
                                                MinWidth="120"/>
                            <DataGridTextColumn Header="Created By" 
                                                Binding="{Binding CreatedBy}" 
                                                Width="*" 
                                                MinWidth="90"/>
                            <DataGridTextColumn Header="Last Update" 
                                                Binding="{Binding LastUpdate, StringFormat=\{0:g\}}" 
                                                Width="*" 
                                                MinWidth="120"/>
                            <DataGridTextColumn Header="Updated By" 
                                                Binding="{Binding LastUpdateBy}" 
                                                Width="*" 
                                                MinWidth="90"/>
                        </DataGrid.Columns>

                        <!-- Alternating row background -->
                        <DataGrid.RowStyle>
                            <Style TargetType="DataGridRow">
                                <Style.Triggers>
                                    <Trigger Property="ItemsControl.AlternationIndex" Value="1">
                                        <Setter Property="Background" Value="#F9F9F9"/>
                                    </Trigger>
                                </Style.Triggers>
                            </Style>
                        </DataGrid.RowStyle>

                        <!-- Selected row highlight overrides -->
                        <DataGrid.Resources>
                            <SolidColorBrush x:Key="{x:Static SystemColors.HighlightBrushKey}" Color="#E0E0E0"/>
                            <SolidColorBrush x:Key="{x:Static SystemColors.InactiveSelectionHighlightBrushKey}" Color="#F0F0F0"/>
                        </DataGrid.Resources>

                    </DataGrid>
                </ScrollViewer>
            </DockPanel>
        </Border>

        <!-- Bottom action buttons -->
        <Border Grid.Row="2"
                Margin="0,0,0,4"
                Background="Transparent">
            <StackPanel Orientation="Horizontal"
                        HorizontalAlignment="Right"
                        VerticalAlignment="Center">

                <Button Content="Add Customer"
                        Style="{StaticResource PrimaryFlatButton}"
                        Click="AddCustomer_Click"/>

                <Button Content="Edit"
                        Style="{StaticResource PrimaryFlatButton}"
                        Margin="8,0,0,0"
                        Click="EditCustomer_Click"/>

                <Button Content="Delete"
                        Style="{StaticResource PrimaryFlatButton}"
                        Margin="8,0,0,0"
                        Background="#EF4444"
                        Click="DeleteCustomer_Click"/>

            </StackPanel>
        </Border>

    </Grid>
</UserControl>
